/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package gui;

import beans.Utilisateur;

/**
 *
 * @author ouahm
 */
public class MDIApplication extends javax.swing.JFrame {

    private Utilisateur utilisateurConnecte;

    /**
     * Creates new form MDIApplication
     */
    public MDIApplication(Utilisateur utilisateur) {
        initComponents();
        this.setTitle("Gestion des groupes");
        this.setExtendedState(MAXIMIZED_BOTH);
        this.utilisateurConnecte = utilisateur;
        restreindreAcces();

    }

    private MDIApplication() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        desktopPane = new javax.swing.JDesktopPane();
        menuBar = new javax.swing.JMenuBar();
        GestionMenu = new javax.swing.JMenu();
        openMenuGrpage = new javax.swing.JMenuItem();
        EtudiantMenuItem = new javax.swing.JMenuItem();
        coursMenuItem = new javax.swing.JMenuItem();
        editMenu = new javax.swing.JMenu();
        cutMenuItem = new javax.swing.JMenuItem();
        helpMenu = new javax.swing.JMenu();
        contentMenuItem = new javax.swing.JMenuItem();
        aboutMenuItem = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        GestionMenu.setMnemonic('f');
        GestionMenu.setText("Gestion");

        openMenuGrpage.setMnemonic('o');
        openMenuGrpage.setText("Grpage");
        openMenuGrpage.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                openMenuGrpageActionPerformed(evt);
            }
        });
        GestionMenu.add(openMenuGrpage);

        EtudiantMenuItem.setMnemonic('a');
        EtudiantMenuItem.setText("Etudiant");
        EtudiantMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                EtudiantMenuItemActionPerformed(evt);
            }
        });
        GestionMenu.add(EtudiantMenuItem);

        coursMenuItem.setMnemonic('x');
        coursMenuItem.setText("Cours");
        coursMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                coursMenuItemActionPerformed(evt);
            }
        });
        GestionMenu.add(coursMenuItem);

        menuBar.add(GestionMenu);

        editMenu.setMnemonic('e');
        editMenu.setText("Recherche");

        cutMenuItem.setMnemonic('t');
        cutMenuItem.setText("Etudiant par Groupe");
        cutMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cutMenuItemActionPerformed(evt);
            }
        });
        editMenu.add(cutMenuItem);

        menuBar.add(editMenu);

        helpMenu.setMnemonic('h');
        helpMenu.setText("Filtrer");

        contentMenuItem.setMnemonic('c');
        contentMenuItem.setText("Etudiant par groupe");
        contentMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                contentMenuItemActionPerformed(evt);
            }
        });
        helpMenu.add(contentMenuItem);

        aboutMenuItem.setMnemonic('a');
        aboutMenuItem.setText("Groupe par nom");
        aboutMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                aboutMenuItemActionPerformed(evt);
            }
        });
        helpMenu.add(aboutMenuItem);

        menuBar.add(helpMenu);

        setJMenuBar(menuBar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(desktopPane, javax.swing.GroupLayout.DEFAULT_SIZE, 566, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(desktopPane, javax.swing.GroupLayout.DEFAULT_SIZE, 402, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void restreindreAcces() {

        if (utilisateurConnecte == null) {
            return;
        }

        String role = utilisateurConnecte.getRole();

        if (role.equalsIgnoreCase("ADMIN")) {
            // ‚úÖ Admin a acc√®s √† tout
            return;
        } else if (role.equalsIgnoreCase("PROFESSEUR")) {
            // üë®‚Äçüè´ Professeur peut g√©rer ses propres groupes et cours
            EtudiantMenuItem.setEnabled(false);  // ‚ùå Pas d'acc√®s √† la gestion des √©tudiants
            openMenuGrpage.setEnabled(true);     // ‚úÖ Peut g√©rer ses groupes
            coursMenuItem.setEnabled(true);      // ‚úÖ Peut g√©rer ses cours
            contentMenuItem.setEnabled(true);    // ‚úÖ Peut rechercher par groupe
            aboutMenuItem.setEnabled(true);      // ‚úÖ Peut rechercher par nom
        } else if (role.equalsIgnoreCase("ETUDIANT")) {
            // üë®‚Äçüéì √âtudiant peut seulement voir
            GestionMenu.setEnabled(false);  // ‚ùå Pas d'acc√®s √† la gestion des groupes/cours
            editMenu.setEnabled(false);      // ‚ùå Pas d'acc√®s √† la recherche avanc√©e
            helpMenu.setEnabled(true);       // ‚úÖ Peut voir les groupes et filtrer
            coursMenuItem.setEnabled(true);  // ‚úÖ Peut voir la liste des cours
        }
    }


    private void coursMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_coursMenuItemActionPerformed
        CoursForm cf = new CoursForm();
        if (utilisateurConnecte.getRole().equalsIgnoreCase("ETUDIANT")) {
            cf.setReadOnlyMode(true);
        }
        desktopPane.add(cf);
        cf.setVisible(true);
    }//GEN-LAST:event_coursMenuItemActionPerformed

    private void openMenuGrpageActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_openMenuGrpageActionPerformed
        GrpageForm gf = new GrpageForm();
        if (utilisateurConnecte.getRole().equalsIgnoreCase("ETUDIANT")) {
            gf.setReadOnlyMode(true);
        }
        desktopPane.add(gf);
        gf.setVisible(true);
    }//GEN-LAST:event_openMenuGrpageActionPerformed

    private void cutMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cutMenuItemActionPerformed

        EtudiantByGrpage ebg = new EtudiantByGrpage();
        desktopPane.add(ebg);
        ebg.setVisible(true);
    }//GEN-LAST:event_cutMenuItemActionPerformed

    private void EtudiantMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_EtudiantMenuItemActionPerformed
        EtudiantForm ef = new EtudiantForm();
        desktopPane.add(ef);
        ef.setVisible(true);

    }//GEN-LAST:event_EtudiantMenuItemActionPerformed

    private void contentMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_contentMenuItemActionPerformed
        FiltrerEtudiantsParGroupe filtreFrame = new FiltrerEtudiantsParGroupe();

        if (utilisateurConnecte.getRole().equalsIgnoreCase("ETUDIANT")) {
            filtreFrame.setReadOnlyMode(true);
        }
        desktopPane.add(filtreFrame);
        filtreFrame.setVisible(true);
    }//GEN-LAST:event_contentMenuItemActionPerformed

    private void aboutMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_aboutMenuItemActionPerformed
        RechercherGroupeForm rechercheFrame = new RechercherGroupeForm();

        desktopPane.add(rechercheFrame);
        rechercheFrame.setVisible(true);
    }//GEN-LAST:event_aboutMenuItemActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MDIApplication.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MDIApplication.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MDIApplication.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MDIApplication.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new MDIApplication().setVisible(true);
            }
        });
    }

    public javax.swing.JMenu getGestionMenu() {
        return GestionMenu;
    }

    public javax.swing.JMenu getEditMenu() {
        return editMenu;
    }


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenuItem EtudiantMenuItem;
    private javax.swing.JMenu GestionMenu;
    private javax.swing.JMenuItem aboutMenuItem;
    private javax.swing.JMenuItem contentMenuItem;
    private javax.swing.JMenuItem coursMenuItem;
    private javax.swing.JMenuItem cutMenuItem;
    private javax.swing.JDesktopPane desktopPane;
    private javax.swing.JMenu editMenu;
    private javax.swing.JMenu helpMenu;
    private javax.swing.JMenuBar menuBar;
    private javax.swing.JMenuItem openMenuGrpage;
    // End of variables declaration//GEN-END:variables

}
